const Termekek = require('../models/Termekek');  // ImportÃ¡ljuk a Termekek modellt
const Rendeles = require('../models/Rendeles');  // ImportÃ¡ljuk a RendelÃ©s modellt

exports.createRendeles = async (req, res) => {
  try {
    const { Uid, Tid, Tdb } = req.body;

    // ğŸ” 1ï¸âƒ£ MegkeressÃ¼k a termÃ©k Ã¡rÃ¡t az adatbÃ¡zisbÃ³l
    const termek = await Termekek.findOne({ where: { Tid: Tid } });

    if (!termek) {
      return res.status(404).json({ error: "A megadott termÃ©k nem talÃ¡lhatÃ³" });
    }

    const termekAra = termek.Tar;  // A termÃ©k Ã¡rÃ¡t a `Tar` mezÅ‘bÅ‘l kell kinyerni!
    const ossz = termekAra * Tdb;  // ğŸ”¢ Teljes Ã¡r kiszÃ¡mÃ­tÃ¡sa

    // ğŸ“ 2ï¸âƒ£ Ãšj rendelÃ©s lÃ©trehozÃ¡sa a kiszÃ¡molt Ã¡rral
    const ujRendeles = await Rendeles.create({
      Uid,
      Tid,
      Tdb,
      ossz  // ğŸ’° Az Ã¡r most mÃ¡r helyesen bekerÃ¼l az adatbÃ¡zisba
    });

    res.status(201).json(ujRendeles);

  } catch (error) {
    console.error("Hiba a rendelÃ©s lÃ©trehozÃ¡sa kÃ¶zben:", error);
    res.status(500).json({ error: "Szerverhiba" });
  }
};


<% termekek.forEach(termek => { %>
                <div class="pizza">
                  <img  class="pizza-img" src="/images/<%= termek.Tnev.toLowerCase() %>.jpg" alt="<%= termek.Tnev %>">
                  <div class="pizza-info">
                  <h2><%= termek.Tnev %></h2>
                  <p class="price">Ãr: <%= termek.Tar %> Ft</p>
                  </div>
                  <br>
                  <button onclick="addToCart('<%= termek.Tnev %>', '<%= termek.Tar %>')">KosÃ¡rba</button>
                </div>
              <% }); %>

const Termekek = require('../models/termekek');

exports.getOrderPage = async (req, res) => {
  try {
    const termekek = await Termekek.findAll();
    res.render('order', { termekek });
  } catch (error) {
    console.error('Hiba a termÃ©kek lekÃ©rÃ©sekor:', error);
    res.status(500).json({ error: 'BelsÅ‘ szerverhiba' });
  }
};
